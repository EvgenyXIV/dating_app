<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–í—Ö–æ–¥</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 400px; margin: 50px auto; padding: 20px; }
        input, button, select { width: 100%; padding: 10px; margin: 5px 0; }
        button { background: #007bff; color: white; border: none; cursor: pointer; }
        .social-buttons { display: flex; flex-direction: column; gap: 10px; margin: 10px 0; }
        .social-buttons button { flex: 1; }
        .google { background: #db4437; }
        .yandex { background: #ffcc00; color: black; }
        .mailru { background: #168de2; }
    </style>
</head>
<body>
    <h1>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
    <form id="loginForm">
        <input type="email" id="email" placeholder="Email" required>
        <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
        <button type="submit">–í–æ–π—Ç–∏</button>
    </form>
    
    <div class="social-buttons">
        <a href="/accounts/google/login/"><button type="button" class="google">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google (WEB)</button></a>
        <a href="/api/auth/social/google/login/"><button type="button" class="google">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google (JWT)</button></a>
        <a href="/accounts/yandex/login/"><button type="button" class="yandex">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Yandex(WEB)</button></a>
        <a href="/api/auth/social/yandex/login/"><button type="button" class="yandex">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Yandex (JWT)</button></a>
        <a href="/accounts/mailru/login/"><button type="button" class="mailru">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Mail.ru(WEB)</button></a>
        <a href="/api/auth/social/mailru/login/"><button type="button" class="mailru">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Mail.ru (JWT)</button></a>
    </div>
    
    <p><a href="/register/">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è (–±–µ–∑ –≤—ã–¥–∞—á–∏ JWT)</a></p>

    <script>
        // –ü–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ "id=loginForm", –æ–∂–∏–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è 'submit' (–∫–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏") –∏ –≤—ã–∑–æ–≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ {...}
        // e.preventDefault() - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–æ—Ä–º—ã - –≤ –∞–ø–∏ –∫–∞—Å—Ç–æ–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º (POST) –≤ –∑–∞–ø—Ä–æ—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–æ–ª–µ–π –≤–æ–¥–∞  –≤ —Ñ–æ—Ä–º–∞—Ç–µ json (JSON.stringify)
        // –ï—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ - –≤—ã–¥–∞—é—Ç—Å—è —Ç–æ–∫–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è 
        // –≤ json-—Ñ–æ—Ä–º–∞—Ç–µ (response.json()) –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage, –¥–∞–ª–µ–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ "/"
        // –∏  
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const response = await fetch('/api/token/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    email: document.getElementById('email').value,
                    password: document.getElementById('password').value
                })
            });
            
            if (response.ok) {
                const data = await response.json();
                localStorage.setItem('access_token', data.access);
                localStorage.setItem('refresh_token', data.refresh);
                alert('–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥!');
                window.location.href = '/';
            } else {
                alert('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞');
            }
        });
    </script>

    <div style="margin-top: 20px; padding: 10px; background: #f5f5f5; border-radius: 5px;">
        <p><small>–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:</small></p>
        <p><small>üëë –°—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: admin@admin.ru / password</small></p>
        <p><small>üë• –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: user_{id}@ example.com / password</small></p>
        <p>
            <small>
                <a href="/unregister/" style="color: #f44336;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</a> |
                <a href="/api/users/unregister/" style="color: #666;">API –≤–µ—Ä—Å–∏—è</a>
            </small>
        </p>
    </div>

</body>
</html>